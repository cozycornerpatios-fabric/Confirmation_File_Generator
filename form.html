<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Generate Cushion Confirmation PDF</title>
</head>
<body>
  <h1>Generate Cushion Confirmation</h1>
  <p>Paste your JSON data below and click "Generate" to create the confirmation PDF.</p>
  <form id="pdfForm">
    <textarea name="json" rows="20" cols="100" placeholder='{
  "customer_name": "John Doe",
  "order_id": "ORD123",
  "email": "john@example.com",
  "shipping_address": ["123 Main St", "City, ST 12345"],
  "billing_address": ["456 Side St", "City, ST 67890"],
  "cushions": [
    {
      "cushion_name": "Mudroom Trapezium Cushion",
      "top_base": 37,
      "bottom_base": 62.5,
      "height": 24.5,
      "zipper": "Left",
      "piping": "Yes",
      "ties": "2 Back Ties",
      "thickness": 3,
      "tie_offset_from_base": 20,
      "quantity": 1
    }
  ]
}'></textarea><br>
    <button type="submit">Generate PDF</button>
  </form>

  <script>
    document.getElementById("pdfForm").addEventListener("submit", function(e) {
      e.preventDefault();
      fetch("/generate-confirmation", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: document.querySelector("textarea").value
      })
      .then(res => res.json())
      .then(data => {
        if (data.pdf_link) {
          window.location.href = data.pdf_link;
        } else {
          alert("Error: " + JSON.stringify(data));
        }
      })
      .catch(err => alert("Request failed: " + err));
    });
  </script>
</body>
</html>

